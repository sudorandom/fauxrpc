# yaml-language-server: $schema=../../stubs.schema.json
stubs:
  - id: introduce-basic
    target: connectrpc.eliza.v1.ElizaService/Introduce
    stream:
      items:
        - content: { sentence: "Hello, I am Eliza." }
          delay: 100ms
        - content: { sentence: "I am here to listen." }
          delay: 500ms
        - content: { sentence: "What is on your mind?" }
          delay: 500ms

  - id: introduce-repeated
    target: connectrpc.eliza.v1.ElizaService/Introduce
    active_if: req.name == "repeat"
    priority: 10
    stream:
      repeated: true
      done_after: 30s
      items:
        - content: { sentence: "This message repeats." }
          delay: 1s

  - id: introduce-cel
    target: connectrpc.eliza.v1.ElizaService/Introduce
    active_if: req.name == "cel"
    priority: 10
    stream:
      items:
        - cel_content: "{'sentence': 'Hello ' + req.name}"
          delay: 200ms
        - cel_content: "{'sentence': 'Nice to meet you, ' + req.name}"
          delay: 200ms

  - id: introduce-error
    target: connectrpc.eliza.v1.ElizaService/Introduce
    active_if: req.name == "error"
    priority: 10
    stream:
      items:
        - content: { sentence: "Something is about to go wrong..." }
          delay: 200ms
        - error:
            code: 13 # INTERNAL
            message: "Something went wrong"
